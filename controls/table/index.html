<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Frame.Table</title>

	</head>
	<body>
		<div id="table">
			
		</div>

		<script data-main="../../config" src="../../bower_components/requirejs/require.js"></script>
		<script>
			require(
				[
					'controls/table/table'
				,	'lib/styles'
				]
			,	function(){
					require(
						[
							'can/util/fixture'
						,	'can/model'
						]
				,	function(){

						var tableData =	[
							{id: 1,	nombre: 'Neri',	apellido: 'Guidi'},
							{id: 2,	nombre: 'Luis',	apellido: 'Fabio'}
						]


						can.fixture("GET /recipes",
							function(){
								return [
									{id: 3,	nombre: 'Juan',	apellido: 'Perez'},
									{id: 4,	nombre: 'Pedro', apellido: 'Gomez'},
							  	]
						})

						can.fixture("POST /recipes",
							function(request, response){
								return can.grep(tableData, function(a){return a.id == request.data})
							})

						can.Model( 'TableModel'	, {
							aDeferred: function() {
								return can.ajax( {
										type: 'GET',
										url: '/recipes'
									} )
							}

						,	filter: function(tableFilter) {
							return can.ajax( {
									type: 'POST'
								,	data: tableFilter
								,	url: '/recipes'
							} ) 
						}
						} ,{}
						)


						new TableControl( '#table'
						,	{
								view_filter: 'views/table/filter.mustache', 
								view_table:	'views/table/init.mustache'
							,	data: 	TableModel
							}
						)
					}
				)}
			)
		</script>
	</body>
</html>